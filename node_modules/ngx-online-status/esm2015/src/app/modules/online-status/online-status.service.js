import * as tslib_1 from "tslib";
var OnlineStatusService_1;
import { EventEmitter, Injectable } from '@angular/core';
import { OnlineStatusType } from './online-status-type.enum';
let OnlineStatusService = OnlineStatusService_1 = class OnlineStatusService {
    constructor() {
        this.status = new EventEmitter(true);
        this.bind();
        window.addEventListener(OnlineStatusService_1.EVENT_TYPE_ONLINE, this.onOnline);
        window.addEventListener(OnlineStatusService_1.EVENT_TYPE_OFFLINE, this.onOffline);
    }
    ngOnDestroy() {
        window.removeEventListener(OnlineStatusService_1.EVENT_TYPE_ONLINE, this.onOnline);
        window.removeEventListener(OnlineStatusService_1.EVENT_TYPE_OFFLINE, this.onOffline);
    }
    bind() {
        this.onOnline = this.onOnline.bind(this);
        this.onOffline = this.onOffline.bind(this);
    }
    onOnline() {
        this.status.emit(OnlineStatusType.ONLINE);
    }
    onOffline() {
        this.status.emit(OnlineStatusType.OFFLINE);
    }
};
OnlineStatusService.EVENT_TYPE_ONLINE = 'online';
OnlineStatusService.EVENT_TYPE_OFFLINE = 'offline';
OnlineStatusService = OnlineStatusService_1 = tslib_1.__decorate([
    Injectable(),
    tslib_1.__metadata("design:paramtypes", [])
], OnlineStatusService);
export { OnlineStatusService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib25saW5lLXN0YXR1cy5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LW9ubGluZS1zdGF0dXMvIiwic291cmNlcyI6WyJzcmMvYXBwL21vZHVsZXMvb25saW5lLXN0YXR1cy9vbmxpbmUtc3RhdHVzLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxPQUFPLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBYSxNQUFNLGVBQWUsQ0FBQztBQUNwRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUc3RCxJQUFhLG1CQUFtQiwyQkFBaEMsTUFBYSxtQkFBbUI7SUFLOUI7UUFKTyxXQUFNLEdBQUcsSUFBSSxZQUFZLENBQW1CLElBQUksQ0FBQyxDQUFDO1FBS3ZELElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUVaLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxxQkFBbUIsQ0FBQyxpQkFBaUIsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDOUUsTUFBTSxDQUFDLGdCQUFnQixDQUFDLHFCQUFtQixDQUFDLGtCQUFrQixFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNsRixDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBbUIsQ0FBQyxpQkFBaUIsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDakYsTUFBTSxDQUFDLG1CQUFtQixDQUFDLHFCQUFtQixDQUFDLGtCQUFrQixFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNyRixDQUFDO0lBRU8sSUFBSTtRQUNWLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDekMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM3QyxDQUFDO0lBRU8sUUFBUTtRQUNkLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFFTyxTQUFTO1FBQ2YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDN0MsQ0FBQztDQUNGLENBQUE7QUEzQlEscUNBQWlCLEdBQUcsUUFBUSxDQUFDO0FBQzdCLHNDQUFrQixHQUFHLFNBQVMsQ0FBQztBQUgzQixtQkFBbUI7SUFEL0IsVUFBVSxFQUFFOztHQUNBLG1CQUFtQixDQTZCL0I7U0E3QlksbUJBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJbmplY3RhYmxlLCBPbkRlc3Ryb3kgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE9ubGluZVN0YXR1c1R5cGUgfSBmcm9tICcuL29ubGluZS1zdGF0dXMtdHlwZS5lbnVtJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIE9ubGluZVN0YXR1c1NlcnZpY2UgaW1wbGVtZW50cyBPbkRlc3Ryb3kge1xuICBwdWJsaWMgc3RhdHVzID0gbmV3IEV2ZW50RW1pdHRlcjxPbmxpbmVTdGF0dXNUeXBlPih0cnVlKTtcbiAgc3RhdGljIEVWRU5UX1RZUEVfT05MSU5FID0gJ29ubGluZSc7XG4gIHN0YXRpYyBFVkVOVF9UWVBFX09GRkxJTkUgPSAnb2ZmbGluZSc7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5iaW5kKCk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihPbmxpbmVTdGF0dXNTZXJ2aWNlLkVWRU5UX1RZUEVfT05MSU5FLCB0aGlzLm9uT25saW5lKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihPbmxpbmVTdGF0dXNTZXJ2aWNlLkVWRU5UX1RZUEVfT0ZGTElORSwgdGhpcy5vbk9mZmxpbmUpO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoT25saW5lU3RhdHVzU2VydmljZS5FVkVOVF9UWVBFX09OTElORSwgdGhpcy5vbk9ubGluZSk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoT25saW5lU3RhdHVzU2VydmljZS5FVkVOVF9UWVBFX09GRkxJTkUsIHRoaXMub25PZmZsaW5lKTtcbiAgfVxuXG4gIHByaXZhdGUgYmluZCgpIHtcbiAgICB0aGlzLm9uT25saW5lID0gdGhpcy5vbk9ubGluZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25PZmZsaW5lID0gdGhpcy5vbk9mZmxpbmUuYmluZCh0aGlzKTtcbiAgfVxuXG4gIHByaXZhdGUgb25PbmxpbmUoKSB7XG4gICAgdGhpcy5zdGF0dXMuZW1pdChPbmxpbmVTdGF0dXNUeXBlLk9OTElORSk7XG4gIH1cblxuICBwcml2YXRlIG9uT2ZmbGluZSgpIHtcbiAgICB0aGlzLnN0YXR1cy5lbWl0KE9ubGluZVN0YXR1c1R5cGUuT0ZGTElORSk7XG4gIH1cbn1cbiJdfQ==