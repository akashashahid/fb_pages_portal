import * as tslib_1 from "tslib";
import { EventEmitter, Injectable } from '@angular/core';
import { OnlineStatusType } from './online-status-type.enum';
var OnlineStatusService = /** @class */ (function () {
    function OnlineStatusService() {
        this.status = new EventEmitter(true);
        this.bind();
        window.addEventListener(OnlineStatusService_1.EVENT_TYPE_ONLINE, this.onOnline);
        window.addEventListener(OnlineStatusService_1.EVENT_TYPE_OFFLINE, this.onOffline);
    }
    OnlineStatusService_1 = OnlineStatusService;
    OnlineStatusService.prototype.ngOnDestroy = function () {
        window.removeEventListener(OnlineStatusService_1.EVENT_TYPE_ONLINE, this.onOnline);
        window.removeEventListener(OnlineStatusService_1.EVENT_TYPE_OFFLINE, this.onOffline);
    };
    OnlineStatusService.prototype.bind = function () {
        this.onOnline = this.onOnline.bind(this);
        this.onOffline = this.onOffline.bind(this);
    };
    OnlineStatusService.prototype.onOnline = function () {
        this.status.emit(OnlineStatusType.ONLINE);
    };
    OnlineStatusService.prototype.onOffline = function () {
        this.status.emit(OnlineStatusType.OFFLINE);
    };
    var OnlineStatusService_1;
    OnlineStatusService.EVENT_TYPE_ONLINE = 'online';
    OnlineStatusService.EVENT_TYPE_OFFLINE = 'offline';
    OnlineStatusService = OnlineStatusService_1 = tslib_1.__decorate([
        Injectable(),
        tslib_1.__metadata("design:paramtypes", [])
    ], OnlineStatusService);
    return OnlineStatusService;
}());
export { OnlineStatusService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib25saW5lLXN0YXR1cy5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LW9ubGluZS1zdGF0dXMvIiwic291cmNlcyI6WyJzcmMvYXBwL21vZHVsZXMvb25saW5lLXN0YXR1cy9vbmxpbmUtc3RhdHVzLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFhLE1BQU0sZUFBZSxDQUFDO0FBQ3BFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBRzdEO0lBS0U7UUFKTyxXQUFNLEdBQUcsSUFBSSxZQUFZLENBQW1CLElBQUksQ0FBQyxDQUFDO1FBS3ZELElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUVaLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxxQkFBbUIsQ0FBQyxpQkFBaUIsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDOUUsTUFBTSxDQUFDLGdCQUFnQixDQUFDLHFCQUFtQixDQUFDLGtCQUFrQixFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNsRixDQUFDOzRCQVZVLG1CQUFtQjtJQVk5Qix5Q0FBVyxHQUFYO1FBQ0UsTUFBTSxDQUFDLG1CQUFtQixDQUFDLHFCQUFtQixDQUFDLGlCQUFpQixFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNqRixNQUFNLENBQUMsbUJBQW1CLENBQUMscUJBQW1CLENBQUMsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3JGLENBQUM7SUFFTyxrQ0FBSSxHQUFaO1FBQ0UsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFFTyxzQ0FBUSxHQUFoQjtRQUNFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFFTyx1Q0FBUyxHQUFqQjtRQUNFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzdDLENBQUM7O0lBMUJNLHFDQUFpQixHQUFHLFFBQVEsQ0FBQztJQUM3QixzQ0FBa0IsR0FBRyxTQUFTLENBQUM7SUFIM0IsbUJBQW1CO1FBRC9CLFVBQVUsRUFBRTs7T0FDQSxtQkFBbUIsQ0E2Qi9CO0lBQUQsMEJBQUM7Q0FBQSxBQTdCRCxJQTZCQztTQTdCWSxtQkFBbUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEVtaXR0ZXIsIEluamVjdGFibGUsIE9uRGVzdHJveSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT25saW5lU3RhdHVzVHlwZSB9IGZyb20gJy4vb25saW5lLXN0YXR1cy10eXBlLmVudW0nO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgT25saW5lU3RhdHVzU2VydmljZSBpbXBsZW1lbnRzIE9uRGVzdHJveSB7XG4gIHB1YmxpYyBzdGF0dXMgPSBuZXcgRXZlbnRFbWl0dGVyPE9ubGluZVN0YXR1c1R5cGU+KHRydWUpO1xuICBzdGF0aWMgRVZFTlRfVFlQRV9PTkxJTkUgPSAnb25saW5lJztcbiAgc3RhdGljIEVWRU5UX1RZUEVfT0ZGTElORSA9ICdvZmZsaW5lJztcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmJpbmQoKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKE9ubGluZVN0YXR1c1NlcnZpY2UuRVZFTlRfVFlQRV9PTkxJTkUsIHRoaXMub25PbmxpbmUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKE9ubGluZVN0YXR1c1NlcnZpY2UuRVZFTlRfVFlQRV9PRkZMSU5FLCB0aGlzLm9uT2ZmbGluZSk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihPbmxpbmVTdGF0dXNTZXJ2aWNlLkVWRU5UX1RZUEVfT05MSU5FLCB0aGlzLm9uT25saW5lKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihPbmxpbmVTdGF0dXNTZXJ2aWNlLkVWRU5UX1RZUEVfT0ZGTElORSwgdGhpcy5vbk9mZmxpbmUpO1xuICB9XG5cbiAgcHJpdmF0ZSBiaW5kKCkge1xuICAgIHRoaXMub25PbmxpbmUgPSB0aGlzLm9uT25saW5lLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbk9mZmxpbmUgPSB0aGlzLm9uT2ZmbGluZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgcHJpdmF0ZSBvbk9ubGluZSgpIHtcbiAgICB0aGlzLnN0YXR1cy5lbWl0KE9ubGluZVN0YXR1c1R5cGUuT05MSU5FKTtcbiAgfVxuXG4gIHByaXZhdGUgb25PZmZsaW5lKCkge1xuICAgIHRoaXMuc3RhdHVzLmVtaXQoT25saW5lU3RhdHVzVHlwZS5PRkZMSU5FKTtcbiAgfVxufVxuIl19