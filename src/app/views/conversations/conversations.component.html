<div>
  <!-- Tab Headers -->
  <ul class="tab-header">
    <li (click)="selectTab('chat')" 
    [ngClass]="{'active-tab': selectedTab === 'chat'}">
      <span>All Messages</span></li>
    <!-- <li (click)="selectTab('data')" [ngClass]="{'active-tab': selectedTab === 'data'}">Data</li>
    <li (click)="selectTab('settings')" [ngClass]="{'active-tab': selectedTab === 'settings'}">Settings</li> -->
  </ul>

  <!-- Tab Content -->
  <div class="tab-content">
    <!-- Chat Box Tab -->
  <div *ngIf="selectedTab === 'chat'" class="chat-notes-wrapper">
    <div >
<div class="messenger-container">
  <!-- Chat interface as provided earlier -->
  <div class="chat-tabs" >
    <!-- Buttons for Unread, Response, Labels -->
    <div class="chat-tab-buttons">
      <button (click)="filterUnread()" class="tab-button"><i class="fa fa-envelope"></i>Unread</button>
      <button (click)="showResponses()" class="tab-button">Response</button>
      <button (click)="getAllLabels()" class="tab-button">Labels</button>
    </div>

    <!-- Conversation List -->
    <ul>
      <li *ngFor="let conversation of conversations" (click)="selectConversation(conversation)"
        [ngClass]="{'active-tab': conversation.id === selectedConversation?.id}">
        <i class="fas fa-user-circle user-icon"></i>
        <span>{{ conversation.id }}</span>
      </li>
    </ul>
  </div>

  <!-- Chat and Notes View -->
   <div class="box-wrapper" *ngIf="selectedConversation">
  <div class="chat-view" >
    <div class="chat-header">
      <i class="fas fa-user-circle user-icon"></i><span>{{ selectedConversation.id }}</span>
    </div>

    <!-- Chat Messages -->
    <div class="chat-messages" #messageContainer>
      <div *ngFor="let message of selectedConversation.messages" class="message-group">
        <div *ngFor="let messageContent of message.messages"
          [ngClass]="{'message': messageContent.from.id != selectedConversation.page_id, 'my-message' : messageContent.from.id == selectedConversation.page_id }">
          <p *ngIf="messageContent.message && messageContent.message!='ðŸ‘'" class="client-msg">{{ messageContent.message }}</p>
          <i *ngIf="!messageContent.message && messageContent.attachments?.data?.length <= 0 || messageContent.message=='ðŸ‘'" alt="" data-visualcompletion="css-img" class="img" style="background-image: url(&quot;https://static.xx.fbcdn.net/rsrc.php/v3/yb/r/K0tgAtyfuvc.png?_nc_eui2=AeFfYXAqsi9J9MkEhD29uVrlct--tGJuIA1y3760Ym4gDf2A7l5UdjPC-pZy00aHT8SOUJnSFUo3PRyMXTMqj4UM&quot;); background-position: -247px -229px; background-size: auto; width: 36px; height: 36px; background-repeat: no-repeat; display: inline-block;"></i>

          <img *ngIf="!messageContent.message && messageContent.attachments?.data?.length > 0" 
           [src]="messageContent.attachments.data[0].file_url || messageContent.attachments.data[0].image_data.url" 
           [alt]="messageContent.attachments.data[0].name" 
           class="attachment-img">
          <p class="timestamp">{{ messageContent.created_time | date: 'short'}}</p>
          <p>{{ messageContent.created_by }}</p>
        </div>
      </div>
    </div>

    <!-- Chat Input -->
    <div class="chat-input">
      <input type="text" placeholder="Type a message..." [(ngModel)]="newMessage"
        (keyup.enter)="sendMessage(newMessage)" />
        <button class="send-btn" (click)="sendMessage(newMessage)">
          <i class="fa fa-paper-plane"></i>
        </button>
      <button id="emojiButton"  class="send-btn" (click)="showEmojiPicker($event.target)">ðŸ˜Š</button>
      <label for="attachment" class="send-btn">
        <i class="fas fa-paperclip"></i>
      </label>
      <input id="attachment" type="file" (change)="onFileSelected($event)" hidden>
      <button class="send-btn" (click)="sendMessage('ðŸ‘')">
        <i class="fa fa-thumbs-up"></i>
      </button>
      
    </div>
  </div>

    <!-- Notes Section (Related to the Selected Conversation) -->
    <div class="notes-container">
      <h2>Notes for {{ selectedConversation.id }}</h2>
      <textarea [(ngModel)]="selectedConversation.notes" rows="6" placeholder="Add notes here..."></textarea>
      <button (click)="saveNotes()">Save Notes</button>
    </div>
    
  </div>
</div>

    </div>
  </div>
    <!-- Data Tab
    <div *ngIf="selectedTab === 'data'">
      <h2>Data View</h2>
      <p>Here you can display any other data or content.</p>
    </div>

   ///Settings Tab 
    <div *ngIf="selectedTab === 'settings'">
      <h2>Settings</h2>
      <p>Here you can add settings or any other form controls.</p>
    </div> -->
  </div>
</div>